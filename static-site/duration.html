<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Choose Duration - TravelPass</title>
    <meta name="description" content="Select your Travel Pass duration with automatic 30% discount on Irish toll roads.">
    <link rel="icon" href="../public/favicon.png" type="image/png">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; line-height: 1.6; color: #333; background: #f8f9fa; }
        .container { max-width: 1000px; margin: 0 auto; padding: 0 20px; }
        
        /* Header */
        .header { border-bottom: 1px solid #e5e7eb; background: #fff; padding: 20px 0; margin-bottom: 40px; }
        .logo { display: flex; align-items: center; gap: 10px; text-decoration: none; color: #333; }
        .logo-icon { width: 32px; height: 32px; background: #16a34a; border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; }
        
        /* Buttons */
        .btn { padding: 10px 20px; border-radius: 8px; text-decoration: none; border: none; cursor: pointer; font-weight: 500; transition: all 0.3s; display: inline-flex; align-items: center; gap: 8px; }
        .btn-ghost { background: transparent; color: #6b7280; }
        .btn-ghost:hover { background: #f3f4f6; }
        .btn-primary { background: #16a34a; color: white; }
        .btn-primary:hover { background: #15803d; }
        .btn-primary:disabled { background: #9ca3af; cursor: not-allowed; }
        .btn-hero { background: linear-gradient(135deg, #16a34a, #059669); color: white; padding: 16px 48px; font-size: 1.2rem; border-radius: 12px; }
        .btn-hero:hover { transform: translateY(-2px); box-shadow: 0 10px 30px rgba(22, 163, 74, 0.3); }
        .btn-full { width: 100%; justify-content: center; }
        
        /* Cards */
        .card { background: white; border-radius: 12px; padding: 24px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); margin-bottom: 24px; }
        .card-duration { cursor: pointer; transition: all 0.3s; position: relative; }
        .card-duration:hover { box-shadow: 0 4px 12px rgba(0,0,0,0.15); }
        .card-duration.selected { border: 2px solid #16a34a; box-shadow: 0 4px 12px rgba(22, 163, 74, 0.2); }
        .card-duration.popular { border: 2px solid #16a34a; }
        
        /* Popular badge */
        .popular-badge { position: absolute; top: -12px; left: 50%; transform: translateX(-50%); background: #16a34a; color: white; padding: 4px 16px; border-radius: 20px; font-size: 0.9rem; }
        
        /* Pricing */
        .price-original { color: #6b7280; text-decoration: line-through; font-size: 1.1rem; }
        .price-discounted { font-size: 2rem; font-weight: bold; color: #16a34a; margin: 8px 0; }
        .price-savings { color: #16a34a; font-weight: 500; }
        
        /* Radio buttons */
        .radio-container { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; }
        .radio-button { width: 20px; height: 20px; border: 2px solid #e5e7eb; border-radius: 50%; position: relative; }
        .radio-button.checked { border-color: #16a34a; }
        .radio-button.checked::after { content: ''; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 10px; height: 10px; background: #16a34a; border-radius: 50%; }
        .check-icon { color: #16a34a; }
        
        /* Grid */
        .grid { display: grid; gap: 24px; }
        .grid-3 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); }
        
        /* Vehicle display */
        .vehicle-found { background: #dcfce7; border: 1px solid #16a34a; border-radius: 8px; padding: 16px; text-align: center; font-size: 1.1rem; font-weight: 500; }
        
        /* Utilities */
        .text-center { text-align: center; }
        .text-muted { color: #6b7280; }
        .font-bold { font-weight: bold; }
        .mb-4 { margin-bottom: 16px; }
        .mb-6 { margin-bottom: 24px; }
        .mb-8 { margin-bottom: 32px; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <a href="index.html" class="logo">
                <div class="logo-icon">TP</div>
                <span style="font-size: 1.5rem; font-weight: bold;">TravelPass</span>
            </a>
        </div>
    </header>

    <div class="container">
        <a href="index.html" class="btn btn-ghost mb-6">
            ← Back to Home
        </a>

        <div class="text-center mb-8">
            <h1 style="font-size: 2.5rem; font-weight: bold; margin-bottom: 16px;">Choose Your Travel Pass Duration</h1>
            <p style="font-size: 1.2rem; color: #6b7280;">Select the perfect pass for your travel needs</p>
        </div>

        <!-- Vehicle Summary -->
        <div class="card">
            <div id="vehicle-display" class="vehicle-found">
                Loading vehicle information...
            </div>
        </div>

        <!-- Duration Selection -->
        <div class="grid grid-3 mb-8">
            <div class="card card-duration" data-days="1">
                <div class="radio-container">
                    <div class="radio-button" id="radio-1"></div>
                    <div class="check-icon hidden" id="check-1">✓</div>
                </div>
                
                <div class="text-center">
                    <h3 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 16px;">1 Day Pass</h3>
                    
                    <div style="margin-bottom: 24px;">
                        <div class="price-original">€5.00</div>
                        <div class="price-discounted">€3.50</div>
                        <div class="price-savings">You save €1.50</div>
                    </div>
                    
                    <div class="text-muted">30% off original price</div>
                </div>
            </div>
            
            <div class="card card-duration popular" data-days="7">
                <div class="popular-badge">Most Popular</div>
                <div class="radio-container">
                    <div class="radio-button" id="radio-7"></div>
                    <div class="check-icon hidden" id="check-7">✓</div>
                </div>
                
                <div class="text-center">
                    <h3 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 16px;">7 Day Pass</h3>
                    
                    <div style="margin-bottom: 24px;">
                        <div class="price-original">€21.43</div>
                        <div class="price-discounted">€15.00</div>
                        <div class="price-savings">You save €6.43</div>
                    </div>
                    
                    <div class="text-muted">30% off original price</div>
                </div>
            </div>
            
            <div class="card card-duration" data-days="30">
                <div class="radio-container">
                    <div class="radio-button" id="radio-30"></div>
                    <div class="check-icon hidden" id="check-30">✓</div>
                </div>
                
                <div class="text-center">
                    <h3 style="font-size: 1.5rem; font-weight: bold; margin-bottom: 16px;">30 Day Pass</h3>
                    
                    <div style="margin-bottom: 24px;">
                        <div class="price-original">€71.43</div>
                        <div class="price-discounted">€50.00</div>
                        <div class="price-savings">You save €21.43</div>
                    </div>
                    
                    <div class="text-muted">30% off original price</div>
                </div>
            </div>
        </div>

        <!-- Discount Calculator -->
        <div class="card mb-8" style="background: #f8f9fa;">
            <h3 style="font-size: 1.2rem; font-weight: 600; text-align: center; margin-bottom: 16px;">How Your Discount is Applied</h3>
            <div class="grid grid-3 text-center">
                <div>
                    <p class="text-muted">Original Price</p>
                    <p style="font-size: 1.1rem; font-weight: 600;" id="original-price">€0.00</p>
                </div>
                <div>
                    <p class="text-muted">30% Discount</p>
                    <p style="font-size: 1.1rem; font-weight: 600; color: #16a34a;" id="discount-amount">-€0.00</p>
                </div>
                <div>
                    <p class="text-muted">Your Price</p>
                    <p style="font-size: 1.5rem; font-weight: bold; color: #16a34a;" id="final-price">€0.00</p>
                </div>
            </div>
        </div>

        <!-- Proceed Button -->
        <div class="text-center">
            <button id="proceed-btn" class="btn btn-hero btn-full" disabled>
                Proceed to Payment
            </button>
        </div>
    </div>

    <script>
        // Duration data
        const durations = {
            1: { days: 1, label: "1 Day Pass", originalPrice: 5.00, discountedPrice: 3.50, savings: 1.50 },
            7: { days: 7, label: "7 Day Pass", originalPrice: 21.43, discountedPrice: 15.00, savings: 6.43, popular: true },
            30: { days: 30, label: "30 Day Pass", originalPrice: 71.43, discountedPrice: 50.00, savings: 21.43 }
        };

        let selectedDuration = null;
        let vehicleData = null;

        // Load vehicle data
        function loadVehicleData() {
            const stored = localStorage.getItem('vehicleData');
            if (stored) {
                vehicleData = JSON.parse(stored);
                document.getElementById('vehicle-display').innerHTML = 
                    `Vehicle: ${vehicleData.color} ${vehicleData.make} ${vehicleData.model} (${vehicleData.registration})`;
            } else {
                document.getElementById('vehicle-display').innerHTML = 
                    '<a href="index.html" style="color: #dc2626;">No vehicle data found. Please start over.</a>';
            }
        }

        // Update price display
        function updatePriceDisplay() {
            const originalEl = document.getElementById('original-price');
            const discountEl = document.getElementById('discount-amount');
            const finalEl = document.getElementById('final-price');
            
            if (selectedDuration) {
                const duration = durations[selectedDuration];
                originalEl.textContent = `€${duration.originalPrice.toFixed(2)}`;
                discountEl.textContent = `-€${duration.savings.toFixed(2)}`;
                finalEl.textContent = `€${duration.discountedPrice.toFixed(2)}`;
            } else {
                originalEl.textContent = '€0.00';
                discountEl.textContent = '-€0.00';
                finalEl.textContent = '€0.00';
            }
        }

        // Select duration
        function selectDuration(days) {
            // Remove previous selection
            document.querySelectorAll('.card-duration').forEach(card => {
                card.classList.remove('selected');
            });
            document.querySelectorAll('.radio-button').forEach(radio => {
                radio.classList.remove('checked');
            });
            document.querySelectorAll('.check-icon').forEach(check => {
                check.classList.add('hidden');
            });

            // Add new selection
            selectedDuration = days;
            const selectedCard = document.querySelector(`[data-days="${days}"]`);
            const selectedRadio = document.getElementById(`radio-${days}`);
            const selectedCheck = document.getElementById(`check-${days}`);
            
            selectedCard.classList.add('selected');
            selectedRadio.classList.add('checked');
            selectedCheck.classList.remove('hidden');
            
            // Update proceed button
            const proceedBtn = document.getElementById('proceed-btn');
            proceedBtn.disabled = false;
            
            // Update price display
            updatePriceDisplay();
            
            // Store selection
            localStorage.setItem('selectedDuration', JSON.stringify(durations[days]));
        }

        // Event listeners
        document.querySelectorAll('.card-duration').forEach(card => {
            card.addEventListener('click', () => {
                const days = parseInt(card.getAttribute('data-days'));
                selectDuration(days);
            });
        });

        document.getElementById('proceed-btn').addEventListener('click', () => {
            if (selectedDuration && vehicleData) {
                // Store data and redirect
                const durationData = durations[selectedDuration];
                localStorage.setItem('selectedDuration', JSON.stringify(durationData));
                
                // Analytics simulation
                console.log('Duration selected:', durationData);
                
                window.location.href = 'payment.html';
            }
        });

        // Initialize
        loadVehicleData();
        updatePriceDisplay();
    </script>
</body>
</html>